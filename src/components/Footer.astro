---
import { SITE, SOCIALS } from "@consts";
import Container from "@components/Container.astro";
---

<footer class="relative bg-white dark:bg-black">
    <div class="animate">
        <section class="py-5 overflow-hidden whitespace-nowrap border-t border-black/10 dark:border-white/25">
            <Container size="md">
                <div class="h-full grid grid-cols-1 sm:grid-cols-2 gap-3">
                    <div class="order-2 sm:order-1 flex flex-col items-center justify-center sm:items-start">
                        <div class="legal">
                            <a
                                href="/legal/terms"
                                class="text-current hover:text-black dark:hover:text-white transition-colors duration-300 ease-in-out"
                            >
                                Terms
                            </a> |
                            <a
                                href="/legal/privacy"
                                class="text-current hover:text-black dark:hover:text-white transition-colors duration-300 ease-in-out"
                            >
                                Privacy
                            </a>
                        </div>
                        <div class="text-sm mt-2">&copy; 2025 | All rights reserved</div>
                    </div>

                    <div class="order-1 sm:order-2 flex justify-center sm:justify-end">
                        <div class="flex flex-wrap gap-1 items-center justify-center">
                            {
                                SOCIALS.map((SOCIAL) => (
                                    <a
                                        href={SOCIAL.HREF}
                                        target="_blank"
                                        aria-label={`${SITE.TITLE} on ${SOCIAL.NAME}`}
                                        class="group size-10 rounded-full p-2 items-center justify-center hover:bg-black/5 dark:hover:bg-white/20  blend"
                                    >
                                        <svg class="size-full fill-current group-hover:fill-black group-hover:dark:fill-white blend">
                                            <use href={`/social.svg#${SOCIAL.ICON}`} />
                                        </svg>
                                    </a>
                                ))
                            }
                        </div>
                    </div>
                </div>
            </Container>
        </section>
    </div>
</footer>

<!-- Floating Scroll to Top Button -->
<button
    id="back-to-top"
    aria-label="Scroll to top"
    class="fixed bottom-8 right-8 z-50 p-3 rounded-full bg-black/80 dark:bg-white/80 text-white dark:text-black shadow-lg hover:bg-black dark:hover:bg-white opacity-0 pointer-events-none transition-opacity duration-300"
>
    <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="stroke-current"
    >
        <polyline points="18 15 12 9 6 15"></polyline>
    </svg>
</button>

<script is:inline>
    function toggleBackToTop() {
        const backToTop = document.getElementById("back-to-top");
        if (!backToTop) return;

        if (window.scrollY > 300) {
            backToTop.classList.remove("opacity-0", "pointer-events-none");
            backToTop.classList.add("opacity-100", "pointer-events-auto");
        } else {
            backToTop.classList.add("opacity-0", "pointer-events-none");
            backToTop.classList.remove("opacity-100", "pointer-events-auto");
        }
    }

    function goBackToTop(event) {
        event.preventDefault();
        window.scrollTo({
            top: 0,
            behavior: "smooth",
        });
    }

    function initializeBackToTop() {
        const backToTop = document.getElementById("back-to-top");
        if (backToTop) {
            backToTop.addEventListener("click", goBackToTop);
            window.addEventListener("scroll", toggleBackToTop, { passive: true });
            toggleBackToTop(); // Check initial state
        }
    }

    document.addEventListener("astro:after-swap", initializeBackToTop);
    initializeBackToTop();
</script>
