---
import { getCollection, type CollectionEntry } from "astro:content";
import Container from "@components/Container.astro";
import PageLayout from "@layouts/PageLayout.astro";
import { SITE, SOCIALS } from "@consts";

const publishedPosts = (await getCollection("blog"))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());

const featuredBlogSelections = [
  {
    slug: "ai/0-machine-learning-crash-course",
    blurb: "The complete ML series, from regression to deep learning",
  },
  {
    slug: "blockchain-fundamentals/00-blockchain-crash-course",
    blurb: "Learn Blockchain, Ethereum, Smart Contracts, and core DeFi concepts",
  },
  {
    slug: "system-design/00-system-design-interview-series",
    blurb: "Crack the System Design Interview with Real-World Solutions",
  },
];

type BlogPreview = { post: CollectionEntry<"blog">; blurb?: string };

const selectedBlogs = featuredBlogSelections
  .map((item): BlogPreview | null => {
    const post = publishedPosts.find((entry) => entry.slug === item.slug);
    if (!post) return null;
    return { post, blurb: item.blurb };
  })
  .filter((entry): entry is BlogPreview => entry !== null);

const blogPreviews: BlogPreview[] =
  selectedBlogs.length > 0
    ? selectedBlogs
    : publishedPosts.slice(0, 3).map((post) => ({ post }));

const stats = [
  {
    title: "ðŸŽ“ PhD in Blockchain Security",
    detail: "Wayne State University (in progress)",
  },
  {
    title: "ðŸ’¼ 5+ Years Industry Experience",
    detail: "Full-stack software engineer",
  },
  {
    title: "ðŸ§ª 190+ GitHub Repos",
    detail: "20+ live projects",
  },
  {
    title: "âœï¸ 30+ Technical Blog Posts",
    detail: "ML, blockchain & system design",
  },
];

const skillAreas = [
  {
    title: "Blockchain & Web3",
    bullets: [
      "Solidity, Ethereum, smart contracts",
      "DeFi protocols (DAO, stablecoin, NFT marketplace)",
      "Smart contract security & common vulnerabilities",
      "Foundry, Hardhat, Ethers.js",
    ],
  },
  {
    title: "AI & Machine Learning",
    bullets: [
      "Python, ML pipelines, model training & evaluation",
      "LLMs, retrieval-augmented generation, agentic assistants",
      "Generative AI, computer vision",
      "Time-series forecasting",
    ],
  },
  {
    title: "Software Engineering",
    bullets: [
      "React, Next.js, Vue.js, Node.js, Laravel",
      "REST APIs, authentication, clean architectures",
      "PostgreSQL, MySQL, MongoDB",
      "Docker, CI/CD, AWS",
    ],
  },
];

const featuredProjects = [
  {
    id: "nft-rental-marketplace",
    title: "NFT Rental Marketplace",
    subtitle: "Time-based NFT rental protocol with royalty support",
    description:
      "Solidity-based marketplace where users rent NFTs for fixed periods with automatic return and creator royalties.",
    stack: "Solidity Â· Hardhat Â· Ethers.js Â· Next.js",
    href: "/projects#nft-rental-marketplace",
  },
  {
    id: "dao-grants-governance",
    title: "DAO Grants Governance",
    subtitle: "On-chain governance for community grants",
    description:
      "Token-based voting with transparent proposals, quorum rules, and clear treasury separation.",
    stack: "Solidity Â· Hardhat Â· TypeScript Â· React",
    href: "/projects#dao-grants-governance",
  },
  {
    id: "solidity-ast-generator",
    title: "Solidity AST Generator",
    subtitle: "Static analysis tooling for Solidity",
    description:
      "Parses Solidity contracts and emits ASTs for deeper analysis, visualization, and security research.",
    stack: "JavaScript Â· Node.js",
    href: "/projects#solidity-ast-generator",
  },
  {
    id: "multi-pdf-rag-chatbot",
    title: "Multi-PDF RAG Chatbot",
    subtitle: "LLM-powered assistant for documents",
    description:
      "Answers questions across multiple PDFs using chunking, embeddings, similarity search, and grounded responses.",
    stack: "Python Â· Vector search Â· LLM API",
    href: "/projects#multi-pdf-rag-chatbot",
  },
];

const certificationSummary =
  "Selected Certifications: IBM â€“ Generative AI Engineering Â· IBM â€“ RAG & Agentic AI Â· Microsoft â€“ AI & ML Engineering Â· Coursera â€“ Blockchain Solution Architecture Â· LearnQuest â€“ Security for Blockchain & DApps";

const email = SOCIALS.find((item) => item.ICON === "email")?.TEXT || "polboy7777@gmail.com";
---

<PageLayout title="Home" description={SITE.DESCRIPTION}>
  <section class="relative pt-28 pb-16">
    <Container size="xl">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-center">
        <div class="space-y-6 animate">
          <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-black dark:text-white leading-tight">
            Blockchain & AI Engineer
            <h2 class="text-2xl md:text-3xl font-semibold text-black dark:text-white">
              PhD Candidate
            </h2>
            <h2 class="text-xl md:text-2xl font-semibold text-black dark:text-white">
              5+ Years of Software Engineering Experience
            </h2>
          </h1>
          <p class="text-base md:text-lg text-black/75 dark:text-white/75">
            I design and build secure blockchain systems and intelligent applicationsâ€”from smart-contract
            security tooling to AI-powered apps for real users.
          </p>
          <div class="flex flex-wrap gap-3">
            <a
              href="/resume.pdf"
              class="py-3 px-5 rounded-full bg-black text-white dark:bg-white dark:text-black text-sm md:text-base font-semibold hover:opacity-80 transition"
            >
              Download Resume
            </a>
            <a
              href="#contact"
              class="py-3 px-5 rounded-full border border-black/20 dark:border-white/25 text-sm md:text-base font-semibold hover:bg-black/5 hover:dark:bg-white/15 transition"
            >
              Hire me for Blockchain / AI / Software Engineering
            </a>
          </div>
          <p class="text-sm text-black/60 dark:text-white/60">
            Based in Detroit, MI Â· Open to remote and on-site roles
          </p>
        </div>

        <div class="animate flex justify-center lg:justify-end">
          <div class="relative">
            <div class="absolute -inset-4 bg-gradient-to-tr from-black/5 via-transparent to-black/10 dark:from-white/10 dark:to-white/5 rounded-[32px] blur-2xl"></div>
            <div class="relative p-1 rounded-[32px] border border-black/10 dark:border-white/15 bg-white/70 dark:bg-black/70 glass-panel">
              <img
                src="/image/imran-pollob.jpg"
                alt="Imran Pollob"
                class="w-[16rem] h-[16rem] md:w-[18rem] md:h-[18rem] rounded-[28px] object-cover border-4 border-black/70 dark:border-white/70"
              />
            </div>
          </div>
        </div>
      </div>
    </Container>
  </section>

  <section class="pb-16">
    <Container size="xl">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        {
          stats.map((item) => (
            <div class="animate p-5 rounded-2xl border border-black/10 dark:border-white/15 bg-white/70 dark:bg-black/70 glass-panel">
              <p class="text-base font-semibold text-black dark:text-white">{item.title}</p>
              <p class="text-sm text-black/70 dark:text-white/70 mt-2">{item.detail}</p>
            </div>
          ))
        }
      </div>
    </Container>
  </section>

  <section class="pb-16">
    <Container size="xl">
      <div class="animate space-y-4">
        <h2 class="text-2xl font-bold text-black dark:text-white">About Me</h2>
        <div class="space-y-4 text-base md:text-lg">
          <p>
            Iâ€™m M M Imran (Pollob), a PhD candidate specializing in <strong>blockchain security</strong>.
          </p>
          <p>
            Before my PhD, I worked for over five years as a <strong>software engineer</strong>, building production
            systems in PHP, JavaScript, Python and modern web frameworks.
          </p>
          <p>
            Iâ€™m most excited about the intersection of <strong>secure blockchain design</strong>, <strong>AI/ML</strong>, and
            <strong>practical software engineering</strong>â€”turning research ideas into tools that people can actually use.
          </p>
        </div>
        <a
          href="/experience"
          class="inline-flex items-center gap-2 text-sm md:text-base font-semibold underline decoration-[.5px] underline-offset-4 decoration-black/30 dark:decoration-white/40 hover:text-black dark:hover:text-white"
        >
          View my experience â†’
        </a>
      </div>
    </Container>
  </section>

  <section class="pb-16">
    <Container size="xl">
      <div class="animate space-y-6">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
          <h2 class="text-2xl font-bold text-black dark:text-white">Core Skill Areas</h2>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          {
            skillAreas.map((area) => (
              <div class="p-6 rounded-2xl border border-black/10 dark:border-white/15 bg-white/70 dark:bg-black/70 glass-panel">
                <h3 class="text-lg font-semibold text-black dark:text-white mb-3">{area.title}</h3>
                <ul class="space-y-2 text-sm md:text-base text-black/80 dark:text-white/80">
                  {area.bullets.map((item) => (
                    <li class="flex gap-2">
                      <span class="mt-1 h-1.5 w-1.5 rounded-full bg-black dark:bg-white"></span>
                      <span class="leading-relaxed">{item}</span>
                    </li>
                  ))}
                </ul>
              </div>
            ))
          }
        </div>
      </div>
    </Container>
  </section>

  <section class="pb-16">
    <Container size="xl">
      <div class="animate flex flex-col gap-6">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
          <div>
            <p class="text-sm uppercase tracking-wide">Projects</p>
            <h2 class="text-2xl font-bold text-black dark:text-white">Featured Projects</h2>
          </div>
          <a
            href="/projects"
            class="inline-flex items-center gap-2 text-sm md:text-base font-semibold underline decoration-[.5px] underline-offset-4 decoration-black/30 dark:decoration-white/40 hover:text-black dark:hover:text-white"
          >
            View all projects â†’
          </a>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          {
            featuredProjects.map((project) => (
              <a
                href={project.href}
                class="p-6 rounded-2xl border border-black/10 dark:border-white/15 bg-white/70 dark:bg-black/70 glass-panel hover:-translate-y-1 transition-transform"
              >
                <div class="flex items-start justify-between gap-3">
                  <div>
                    <p class="text-xs uppercase text-black/60 dark:text-white/60">{project.subtitle}</p>
                    <h3 class="text-xl font-semibold text-black dark:text-white mt-1">{project.title}</h3>
                  </div>
                  <span class="text-xs px-2 py-1 rounded-full border border-black/10 dark:border-white/20">
                    {project.stack}
                  </span>
                </div>
                <p class="mt-3 text-sm md:text-base text-black/80 dark:text-white/80 leading-relaxed">
                  {project.description}
                </p>
                <p class="mt-4 text-sm font-semibold underline decoration-[.5px] underline-offset-4">
                  View project â†’
                </p>
              </a>
            ))
          }
        </div>
      </div>
    </Container>
  </section>

  <section class="pb-16">
    <Container size="xl">
      <div class="animate flex flex-col gap-6">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
          <div>
            <p class="text-sm uppercase tracking-wide">Blog</p>
            <h2 class="text-2xl font-bold text-black dark:text-white">Start a Crash Course</h2>
          </div>
          <a
            href="/blog"
            class="inline-flex items-center gap-2 text-sm md:text-base font-semibold underline decoration-[.5px] underline-offset-4 decoration-black/30 dark:decoration-white/40 hover:text-black dark:hover:text-white"
          >
            Read the blog â†’
          </a>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          {
            blogPreviews.map(({ post, blurb }) => (
              <a
                href={`/blog/${post.slug}`}
                class="p-6 rounded-2xl border border-black/10 dark:border-white/15 bg-white/70 dark:bg-black/70 glass-panel hover:-translate-y-1 transition-transform"
              >
                <p class="text-xs uppercase text-black/60 dark:text-white/60">{post.data.tags.join(", ")}</p>
                <h3 class="text-lg font-semibold text-black dark:text-white mt-2">
                  {post.data.title}
                </h3>
                <p class="mt-3 text-sm md:text-base text-black/80 dark:text-white/80 leading-relaxed">
                  {blurb || post.data.summary || "Explore the full post for details."}
                </p>
                <p class="mt-4 text-sm font-semibold underline decoration-[.5px] underline-offset-4">
                  Read post â†’
                </p>
              </a>
            ))
          }
        </div>
      </div>
    </Container>
  </section>

  <section class="pb-16">
    <Container size="xl">
      <div class="animate p-6 rounded-2xl border border-black/10 dark:border-white/15 bg-white/70 dark:bg-black/70 glass-panel flex flex-col md:flex-row md:items-center md:justify-between gap-4">
        <div class="space-y-2">
          <p class="text-sm uppercase tracking-wide">Certifications Preview</p>
          <p class="text-base md:text-lg text-black dark:text-white">
            {certificationSummary}
          </p>
        </div>
        <a
          href="/experience#certifications"
          class="inline-flex items-center justify-center px-4 py-2 rounded-full border border-black/20 dark:border-white/25 font-semibold text-sm md:text-base hover:bg-black/5 hover:dark:bg-white/15 transition"
        >
          See details â†’
        </a>
      </div>
    </Container>
  </section>

  <section id="contact" class="pb-20">
    <Container size="xl">
      <div class="animate p-8 rounded-2xl border border-black/10 dark:border-white/15 bg-white/70 dark:bg-black/70 glass-panel space-y-6">
        <div class="space-y-2">
          <p class="text-sm uppercase tracking-wide">Contact</p>
          <h2 class="text-2xl font-bold text-black dark:text-white">Letâ€™s build something secure and intelligent.</h2>
          <p class="text-base md:text-lg text-black/80 dark:text-white/80">
            Iâ€™m looking for opportunities in:
          </p>
          <ul class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm md:text-base text-black/80 dark:text-white/80">
            <li>â€¢ Blockchain / Smart Contract Engineering</li>
            <li>â€¢ Blockchain Security</li>
            <li>â€¢ AI / ML Engineering (LLMs, RAG, applied ML)</li>
            <li>â€¢ Full-Stack Software Engineering</li>
          </ul>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="col-span-2 space-y-4">
            <form
              class="space-y-3"
              action={`mailto:${email}`}
              method="GET"
            >
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <input
                  type="text"
                  name="subject"
                  placeholder="Subject"
                  class="w-full rounded-lg border border-black/10 dark:border-white/20 bg-white/80 dark:bg-black/60 px-3 py-2"
                  required
                />
                <input
                  type="email"
                  value={email}
                  class="w-full rounded-lg border border-black/10 dark:border-white/20 bg-white/80 dark:bg-black/60 px-3 py-2"
                  readonly
                />
              </div>
              <textarea
                name="body"
                rows="4"
                placeholder="Tell me about your project or role..."
                class="w-full rounded-lg border border-black/10 dark:border-white/20 bg-white/80 dark:bg-black/60 px-3 py-2"
              ></textarea>
              <button
                type="submit"
                class="inline-flex items-center px-4 py-2 rounded-full bg-black text-white dark:bg-white dark:text-black font-semibold hover:opacity-80 transition"
              >
                Send an email
              </button>
            </form>
          </div>
          <div class="col-span-1 space-y-3 text-sm md:text-base text-black/80 dark:text-white/80">
            <div>
              <p class="font-semibold text-black dark:text-white">ðŸ“§ Email</p>
              <a href={`mailto:${email}`} class="underline decoration-[.5px] underline-offset-4 hover:text-black dark:hover:text-white">
                {email}
              </a>
            </div>
            <div>
              <p class="font-semibold text-black dark:text-white">ðŸ”— GitHub</p>
              <a href="https://github.com/imranpollob" target="_blank" class="underline decoration-[.5px] underline-offset-4 hover:text-black dark:hover:text-white">
                imranpollob
              </a>
            </div>
            <div>
              <p class="font-semibold text-black dark:text-white">ðŸ”— LinkedIn</p>
              <a href="https://www.linkedin.com/in/imranpollob/" target="_blank" class="underline decoration-[.5px] underline-offset-4 hover:text-black dark:hover:text-white">
                imranpollob
              </a>
            </div>
          </div>
        </div>
      </div>
    </Container>
  </section>
</PageLayout>
