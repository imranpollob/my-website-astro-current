---
import PageLayout from "@layouts/PageLayout.astro";
import Container from "@components/Container.astro";
import { EXPERIENCE } from "@consts";

const professionalExperience = [
    {
        company: "Wayne State University",
        role: "Graduate Teaching Assistant",
        duration: "Aug 2021 – Present · Detroit, MI",
        logo: "/image/company-logos/wayne-state-university.png",
        bullets: [
            "Mentored student teams in Software Engineering using Agile — planning, development, testing, and deployment of projects.",
            "Developed and delivered Java Programming course materials and a final project to build foundational and advanced Java skills.",
            "Designed and taught Problem Solving & Programming (C++) with emphasis on algorithmic thinking and practical coding exercises.",
            "Facilitated Bioinformatics Programming labs using R, guiding hands-on use of bioinformatics tools and techniques.",
            "Led Computer Architecture & Organization lab sections, connecting theory to practical lab implementations.",
        ],
    },
    {
        company: "Cefalo",
        role: "Software Engineer",
        duration: "Sep 2019 – Jul 2021",
        logo: "/image/company-logos/cefalo.png",
        bullets: [
            "Collaborated with data analysts to programmatically collect and process data from numerous sources using Python.",
            "Developed and maintained an e-commerce site and other internal tools.",
            "Consulted directly with clients to gather requirements and recommend technical solutions.",
            "Maintained cloud servers and integrated third-party cloud services.",
            "Contributed to an internal recruitment application built with Laravel and Vue.js.",
        ],
    },
    {
        company: "Rapid Web Services",
        role: "Full-Stack Software Engineer",
        duration: "May 2018 – Sep 2019",
        logo: "/image/company-logos/rapid-web-services.png",
        bullets: [
            "Developed and maintained the SeeBiz inventory management system, following Agile methodologies for disciplined task execution.",
            "Worked primarily with PHP (Laravel), JavaScript (Node, React) to implement features and maintain the codebase.",
            "Developed RESTful APIs and integrated them into the existing inventory system.",
            "Fixed bugs, profiled performance, and improved application reliability and scalability.",
            "Implemented CI/CD pipelines and continuously evaluated and adopted new tools to maximize development efficiency.",
        ],
    },
    {
        company: "Codalo",
        role: "Software Engineer",
        duration: "Nov 2016 – Apr 2018",
        logo: "/image/company-logos/codalo.png",
        bullets: [
            "Worked on several prototypes, including a school management system and a parcel delivery system; the school management system is now running in multiple schools across Bangladesh.",
            "Brainstormed product workflows and planned work procedures to align with client requirements.",
            "Regularly tested the product, gathered feedback from clients, and provided ongoing support.",
            "Provided bug fixes, refactored code, and revised product workflows based on client feedback.",
        ],
    },
];

const education = [
    {
        school: "Wayne State University",
        degree: "PhD Candidate",
        department: "Computer Science",
        timeframe: "2021 – 2026",
        detail: "Grade: 3.87 out of 4.00",
    },
    {
        school: "Jahangirnagar University",
        degree: "Master of Science",
        department: "Information Technology",
        timeframe: "2016 – 2017",
        detail: "Grade: 3.65 out of 4.00",
    },
    {
        school: "Jahangirnagar University",
        degree: "Bachelor of Science",
        department: "Information Technology",
        timeframe: "2011 – 2015",
        detail: "Grade: 3.62 out of 4.00",
    },
];

const certifications = [
    {
        title: "Blockchain & Security",
        items: [
            {
                name: "Security for Blockchain and DApps",
                thumbnail: "/image/certifications/security-for-blockchain-dapps-thumb.jpg",
                fullImage: "/image/certifications/security-for-blockchain-dapps-full.jpg",
                credentialUrl:
                    "https://www.coursera.org/account/accomplishments/specialization/certificate/G1LITZ430K3Q",
                detail: [
                    "Identified and mitigated blockchain vulnerabilities",
                    "Understood DeFi risks and cryptographic methods",
                    "Secured smart contracts and DApp architectures",
                ],
            },
            {
                name: "Blockchain Solution Architecture",
                thumbnail: "/image/certifications/blockchain-solution-architecture-thumb.jpg",
                fullImage: "/image/certifications/blockchain-solution-architecture-full.jpg",
                credentialUrl:
                    "https://www.coursera.org/account/accomplishments/specialization/certificate/O3Q7CG1SRKM5",
                detail: [
                    "Explored scalable blockchain solutions",
                    "Evaluated architecture decisions and managed risk",
                    "Integrated privacy and security in end-to-end systems",
                ],
            },
            {
                name: "Blockchain Security",
                thumbnail: "/image/certifications/blockchain-security-thumb.jpg",
                fullImage: "/image/certifications/blockchain-security-full.jpg",
                credentialUrl: "https://www.coursera.org/account/accomplishments/certificate/3BN6UAX4MZDZ",
                detail: [
                    "Mastered blockchain security concepts and threats",
                    "Explored attack surfaces and cryptography basics",
                    "Applied best practices for securing systems",
                ],
            },
        ],
    },
    {
        title: "AI & Machine Learning",
        items: [
            {
                name: "IBM Generative AI Engineering",
                thumbnail: "/image/certifications/ibm-generative-ai-engineering-thumb.jpg",
                fullImage: "/image/certifications/ibm-generative-ai-engineering-full.jpg",
                credentialUrl:
                    "https://www.coursera.org/account/accomplishments/specialization/certificate/VCI51YJT40UL",
                detail: [
                    "Learned foundational AI/ML security concepts",
                    "Explored threats, attack surfaces, and cryptography",
                    "Applied best practices for securing AI systems",
                ],
            },
            {
                name: "IBM RAG and Agentic AI",
                thumbnail: "/image/certifications/ibm-rag-agentic-ai-thumb.jpg",
                fullImage: "/image/certifications/ibm-rag-agentic-ai-full.jpg",
                credentialUrl:
                    "https://www.coursera.org/account/accomplishments/specialization/certificate/9T9ZY7QU9A4G",
                detail: [
                    "Mastered retrieval-augmented generation (RAG)",
                    "Worked with vector databases and multimodal AI",
                    "Built agentic multi-agent systems with LangChain, CrewAI",
                ],
            },
            {
                name: "Microsoft AI & ML Engineering",
                thumbnail: "/image/certifications/microsoft-ai-ml-thumb.jpg",
                fullImage: "/image/certifications/microsoft-ai-ml-full.jpg",
                credentialUrl:
                    "https://www.coursera.org/account/accomplishments/specialization/certificate/9ZRZI7NIJCI0",
                detail: [
                    "Learned core AI/ML algorithms and deep learning",
                    "Deployed cloud-based AI and designed intelligent agents",
                    "Applied ML workflows with Azure and modern tooling",
                ],
            },
        ],
    },
];

const skills = [
    { label: "Languages", values: ["Python", "JavaScript", "PHP", "Solidity", "Java", "C++"] },
    { label: "Frameworks", values: ["React", "Next.js", "Node.js", "Laravel"] },
    { label: "Blockchain", values: ["Solidity", "Foundry", "Hardhat", "Ethers.js", "Web3.js"] },
    { label: "AI/ML", values: ["LLM Finutuning", "LangChain", "RAG", "Vector DB", "Multimodal AI"] },
    { label: "Security", values: ["Smart contract security", "DeFi risk analysis", "Secure architectures"] },
    { label: "Cloud & Ops", values: ["AWS", "Azure ML", "Docker", "CI/CD", "Linux", "Git"] },
];
---

<PageLayout title={EXPERIENCE.TITLE} description={EXPERIENCE.DESCRIPTION}>
    <section class="pt-28 pb-10">
        <Container size="xl">
            <div class="animate space-y-4 text-center">
                <div class="text-xl md:text-2xl lg:text-3xl page-heading glass-panel">
                    {EXPERIENCE.TITLE}
                </div>
                <article class="prose dark:prose-invert max-w-3xl mx-auto glass-panel">
                    <p>
                        Over the last few years I’ve worked both as a <strong>professional software engineer</strong> and
                        a
                        <strong> graduate teaching assistant</strong>, while pursuing a PhD in blockchain security
                    </p>
                    <p>Here’s what I’ve built, taught, and learned along the way</p>
                </article>
            </div>
        </Container>
    </section>

    <section class="pb-16">
        <Container size="xl">
            <div class="animate space-y-6">
                <div>
                    <p class="text-sm uppercase tracking-wide glass-panel">Professional Experience</p>
                    <h2 class="text-2xl font-bold text-black dark:text-white glass-panel">Timeline</h2>
                </div>
                <div class="relative pl-4 md:pl-6">
                    <div class="absolute left-1 md:left-2 top-2 bottom-2 w-px bg-black/10 dark:bg-white/20"></div>
                    <ul class="space-y-8">
                        {
                            professionalExperience.map((item) => (
                                <li class="relative pl-6 md:pl-8">
                                    <span class="absolute left-0 top-2 inline-block h-3 w-3 rounded-full bg-black dark:bg-white" />
                                    <div class="p-6 rounded-2xl border border-black/10 dark:border-white/15 glass-panel space-y-2">
                                        <div class="flex flex-col md:flex-row items-start gap-4 md:gap-6">
                                            <div class="flex-shrink-0 flex justify-center md:justify-start">
                                                <img
                                                    src={item.logo}
                                                    alt={`${item.company} logo`}
                                                    class="w-16 h-16 md:w-24 md:h-24 object-contain rounded-md bg-white/60 dark:bg-black/60 mx-auto md:mx-0"
                                                />
                                            </div>
                                            <div class="flex-1">
                                                m
                                                <p class="text-xs uppercase text-black/60 dark:text-white/60">
                                                    {item.duration}
                                                </p>
                                                <h3 class="text-xl font-semibold text-black dark:text-white">
                                                    {item.company}
                                                </h3>
                                                <p class="text-base font-semibold">{item.role}</p>
                                                <ul class="pt-2 md:pt-3 list-disc ml-5 md:ml-6 space-y-2 text-sm md:text-base text-black/80 dark:text-white/80">
                                                    {item.bullets.map((point) => (
                                                        <li>{point}</li>
                                                    ))}
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            ))
                        }
                    </ul>
                </div>
            </div>
        </Container>
    </section>

    <section class="pb-16" id="education">
        <Container size="xl">
            <div class="animate space-y-4">
                <div>
                    <p class="text-sm uppercase tracking-wide glass-panel">Education</p>
                    <h2 class="text-2xl font-bold text-black dark:text-white glass-panel">Academic Background</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    {
                        education.map((item) => (
                            <div class="p-6 rounded-2xl border border-black/10 dark:border-white/15 glass-panel space-y-1">
                                <h3 class="text-lg font-semibold text-black dark:text-white">{item.school}</h3>
                                <p class="text-sm md:text-base text-black/80 dark:text-white/80">{item.degree}</p>
                                <p class="text-sm md:text-base text-black/80 dark:text-white/80">{item.department}</p>
                                <p class="text-xs md:text-sm uppercase text-black/60 dark:text-white/60">
                                    {item.timeframe}
                                </p>
                                <p class="text-xs md:text-sm uppercase text-black/60 dark:text-white/60">
                                    {item.detail}
                                </p>
                            </div>
                        ))
                    }
                </div>
            </div>
        </Container>
    </section>

    <section class="pb-16" id="certifications">
        <Container size="xl">
            <div class="animate space-y-6">
                <div>
                    <p class="text-sm uppercase tracking-wide glass-panel">Certifications</p>
                    <h2 class="text-2xl font-bold text-black dark:text-white glass-panel">Credentials</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {
                        certifications.map((group) => (
                            <div class="p-6 rounded-2xl border border-black/10 dark:border-white/15 glass-panel space-y-4">
                                <h3 class="text-lg font-semibold text-black dark:text-white">{group.title}</h3>
                                <div class="flex flex-col gap-8">
                                    {group.items.map((item) => (
                                        <div class="rounded-lg flex gap-4 items-start">
                                            {item.thumbnail && (
                                                <button
                                                    type="button"
                                                    class="shrink-0 rounded-lg border border-black/10 dark:border-white/20 overflow-hidden bg-white/70 dark:bg-black/60 hover:shadow-md transition cursor-pointer"
                                                    data-cert-image={item.fullImage || item.thumbnail}
                                                    data-cert-title={item.name}
                                                    data-cert-link={item.credentialUrl}
                                                    aria-label={`Open full image for ${item.name}`}
                                                >
                                                    <img
                                                        src={item.thumbnail}
                                                        alt={`${item.name} thumbnail`}
                                                        class="w-20 h-20 object-cover"
                                                        loading="lazy"
                                                    />
                                                </button>
                                            )}
                                            <div class="flex-1">
                                                <p class="font-semibold text-black dark:text-white">{item.name}</p>
                                                <ul class="list-disc ml-5 space-y-1 text-sm md:text-base text-black/80 dark:text-white/80">
                                                    {item.detail.slice(0, 4).map((point) => (
                                                        <li>{point}</li>
                                                    ))}
                                                </ul>
                                                {item.credentialUrl && (
                                                    <a
                                                        href={item.credentialUrl}
                                                        target="_blank"
                                                        class="inline-flex items-center gap-1 mt-2 text-sm font-semibold underline decoration-[.5px] underline-offset-4 cert-open"
                                                        rel="noreferrer"
                                                        data-cert-image={item.fullImage || item.thumbnail}
                                                        data-cert-title={item.name}
                                                        data-cert-link={item.credentialUrl}
                                                    >
                                                        View credential →
                                                    </a>
                                                )}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        ))
                    }
                </div>
            </div>
        </Container>
    </section>

    <dialog id="cert-modal" class="backdrop:bg-black/40 rounded-2xl p-0 border border-black/20 dark:border-white/20">
        <div class="bg-white dark:bg-black rounded-2xl overflow-hidden max-w-3xl">
            <div class="flex items-center justify-between px-4 py-3 border-b border-black/10 dark:border-white/15">
                <p id="cert-modal-title" class="font-semibold text-black dark:text-white text-base md:text-lg"></p>
                <button
                    id="cert-modal-close"
                    class="p-2 rounded-full border border-black/10 dark:border-white/20 hover:bg-black/5 hover:dark:bg-white/10"
                    aria-label="Close certification image"
                >
                    <svg class="size-4" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2">
                        <path d="M6 6l12 12"></path>
                        <path d="M6 18L18 6"></path>
                    </svg>
                </button>
            </div>
            <div class="bg-black/5 dark:bg-white/5 flex flex-col justify-center items-center p-4 gap-3">
                <img
                    id="cert-modal-img"
                    src=""
                    alt=""
                    class="max-h-[70vh] w-auto rounded-lg border border-black/10 dark:border-white/15"
                />
                <a
                    id="cert-modal-link"
                    href="#"
                    target="_blank"
                    rel="noreferrer"
                    class="inline-flex items-center gap-1 text-sm font-semibold underline decoration-[.5px] underline-offset-4"
                >
                    Verify credential →
                </a>
            </div>
        </div>
    </dialog>

    <script is:inline>
        function attachCertificationModal() {
            const modal = document.getElementById("cert-modal");
            const modalImg = document.getElementById("cert-modal-img");
            const modalTitle = document.getElementById("cert-modal-title");
            const closeBtn = document.getElementById("cert-modal-close");
            const modalLink = document.getElementById("cert-modal-link");

            function openModal(src, title, link) {
                if (!modal || !modalImg || !modalTitle || !modalLink) return;
                modalImg.src = src;
                modalTitle.textContent = title;
                modalLink.href = link || "#";
                modalLink.style.display = link ? "inline-flex" : "none";
                // Some browsers require showModal to exist on dialog
                if (typeof modal.showModal === "function") {
                    modal.showModal();
                } else {
                    modal.setAttribute("open", "true");
                }
            }

            function closeModal() {
                if (!modal) return;
                if (typeof modal.close === "function") {
                    modal.close();
                } else {
                    modal.removeAttribute("open");
                }
            }

            function attachTriggers() {
                document.querySelectorAll("[data-cert-image]").forEach((trigger) => {
                    trigger.addEventListener("click", (event) => {
                        event.preventDefault();
                        const src = trigger.getAttribute("data-cert-image");
                        const title = trigger.getAttribute("data-cert-title") || "Certification";
                        const link = trigger.getAttribute("data-cert-link") || "";
                        if (src) openModal(src, title, link);
                    });
                });
            }

            attachTriggers();

            document.addEventListener("astro:after-swap", attachTriggers);
            document.addEventListener("astro:after-swap", () => {
                closeBtn?.addEventListener("click", closeModal);
                modal?.addEventListener("click", (event) => {
                    if (event.target === modal) closeModal();
                });
            });

            closeBtn?.addEventListener("click", closeModal);
            modal?.addEventListener("click", (event) => {
                if (event.target === modal) closeModal();
            });
        }

        document.addEventListener("astro:after-swap", attachCertificationModal);
        attachCertificationModal();
    </script>

    <section class="pb-20">
        <Container size="xl">
            <div class="animate space-y-4">
                <div>
                    <p class="text-sm uppercase tracking-wide glass-panel">Skills Overview</p>
                    <h2 class="text-2xl font-bold text-black dark:text-white glass-panel">Tools & Strengths</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    {
                        skills.map((skill) => (
                            <div class="p-4 rounded-2xl border border-black/10 dark:border-white/15 glass-panel flex flex-col gap-2">
                                <p class="text-sm font-semibold text-black dark:text-white uppercase">{skill.label}</p>
                                <div class="flex flex-wrap gap-2">
                                    {skill.values.map((value) => (
                                        <span class="px-3 py-1 rounded-full border border-black/10 dark:border-white/25 text-sm bg-black/5 dark:bg-white/15">
                                            {value}
                                        </span>
                                    ))}
                                </div>
                            </div>
                        ))
                    }
                </div>
            </div>
        </Container>
    </section>
</PageLayout>
